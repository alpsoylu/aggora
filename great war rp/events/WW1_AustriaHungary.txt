add_namespace = ww1_austria
# FRANZ I DIES
####################
news_event = {
	id = ww1_austria.1
	title = ww1_austria.1.t
	desc = ww1_austria.1.d
	picture = ww1_austria_1
	major = yes
	mean_time_to_happen = {
		days = 0
	}
	trigger = {
		any_country = {
			OR = {
				has_country_leader = {
					name = "Franz Joseph I"
					ruling_only = no
				}
				has_country_leader = {
					name = "I. Ferenc József"
					ruling_only = no
				}
			}
		}
		date > 1916.11.21
	}
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = kis_franzferdinand_murdered
				}
				AUH = {
					kill_ideology_leader = neutrality
					create_country_leader = {
						name = "Karl I"
						picture = "gfx/leaders/AUH/AUH_karl_i.dds"
						expire = "1935.1.1"
						ideology = autocracy
						traits = {
							trait_autocracy
						}
					}
					set_country_flag = emperor_franz_dead
				}
				if = {
					limit = {
						HUN = {
							has_country_leader = {
								name = "I. Ferenc József"
								ruling_only = no
							}
						}
					}
					HUN = {
						kill_ideology_leader = neutrality
						create_country_leader = {
							name = "IV. Károly"
							picture = "gfx/leaders/AUH/AUH_karl_i.dds"
							expire = "1935.1.1"
							ideology = autocracy
							traits = {
								trait_autocracy
							}
						}
					}
				}
				if = {
					limit = {
						VNC = {
							has_country_leader = {
								name = "Franz Joseph I"
								ruling_only = no
							}
						}
					}
					VNC = {
						kill_ideology_leader = neutrality
						create_country_leader = {
							name = "Karl I"
							picture = "gfx/leaders/AUH/AUH_karl_i.dds"
							expire = "1935.1.1"
							ideology = autocracy
							traits = {
								trait_autocracy
							}
						}
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_leader = {
								name = "Franz Joseph I"
								ruling_only = no
							}
						}
					}
					AUS = {
						kill_ideology_leader = neutrality
						create_country_leader = {
							name = "Karl von Habsburg"
							picture = "gfx/leaders/AUH/AUH_karl_i.dds"
							expire = "1935.1.1"
							ideology = autocracy
							traits = {
								trait_autocracy
							}
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_global_flag = kis_franzferdinand_murdered
					}
				}
				AUH = {
					kill_ideology_leader = neutrality
					create_country_leader = {
						name = "Franz Ferdinand I"
						picture = "gfx/leaders/AUH/AUH_franz_ferdinand.dds"
						expire = "1935.1.1"
						ideology = autocracy
						traits = {
							trait_autocracy
						}
					}
					set_country_flag = emperor_franz_dead
					set_country_flag = franz_ferdinand_ruler
				}
				if = {
					limit = {
						HUN = {
							has_country_leader = {
								name = "I. Ferenc József"
								ruling_only = no
							}
						}
					}
					HUN = {
						kill_ideology_leader = neutrality
						create_country_leader = {
							name = "I. Ferenc Ferdinánd"
							picture = "gfx/leaders/AUH/AUH_franz_ferdinand.dds"
							expire = "1935.1.1"
							ideology = autocracy
							traits = {
								unpopular_monarch
								trait_autocracy
							}
						}
					}
				}
				if = {
					limit = {
						VNC = {
							has_country_leader = {
								name = "Franz Joseph I"
								ruling_only = no
							}
						}
					}
					VNC = {
						kill_ideology_leader = neutrality
						create_country_leader = {
							name = "Franz Ferdinand I"
							picture = "gfx/leaders/AUH/AUH_franz_ferdinand.dds"
							expire = "1935.1.1"
							ideology = autocracy
							traits = {
								trait_autocracy
							}
						}
					}
				}
				if = {
					limit = {
						AUS = {
							has_country_leader = {
								name = "Franz Joseph I"
								ruling_only = no
							}
						}
					}
					AUS = {
						kill_ideology_leader = neutrality
						create_country_leader = {
							name = "Franz Ferdinand von Habsburg"
							picture = "gfx/leaders/AUH/AUH_franz_ferdinand.dds"
							expire = "1935.1.1"
							ideology = autocracy
							traits = {
								trait_autocracy
							}
						}
					}
				}
			}
		}
	}
	option = {
		name = ww1_austria.1.a
		ai_chance = {
			factor = 100
		}
		trigger = {
			TAG = AUH
		}
	}
	option = {
		name = ww1_austria.1.b
		ai_chance = {
			factor = 100
		}
		trigger = {
			NOT = {
				TAG = AUH
			}
		}
	}
}

# DEAL WITH ITALY
#################
country_event = {
	id = ww1_austria.2
	title = ww1_austria.2.t
	desc = ww1_austria.2.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		name = ww1_austria.2.a
		ITA = {
			country_event = {
				days = 1
				id = ww1_austria.3
			}
		}
		ai_chance = {
			factor = 100
		}
	}
}

# DEAL WITH ITALY
#################
country_event = {
	id = ww1_austria.3
	title = ww1_austria.3.t
	desc = ww1_austria.3.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		name = ww1_austria.3.a
		transfer_state = 244
		transfer_state = 513
		AUH = {
			remove_state_core = 244
			remove_state_core = 513
		}
		GER = {
			add_to_faction = ITA
		}
		remove_ideas = idea_italy_triple_alliance
		news_event = {
			id = ww1_austria.4
		}
		add_opinion_modifier = { target = AUH modifier = large_increase }
		reverse_add_opinion_modifier = { target = AUH modifier = large_increase }
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_austria.3.b
		set_global_flag = ita_rejected_the_deal
		reverse_add_opinion_modifier = { target = AUH modifier = faction_traitor }
		reverse_add_opinion_modifier = { target = GER modifier = faction_traitor }
		add_ai_strategy = {
			type = alliance
			id = GER
			value = -200
		}
		add_ai_strategy = {
			type = alliance
			id = AUH
			value = -200
		}
		diplomatic_relation = {
			country = GER
			relation = guarantee
			active = no
		}
		diplomatic_relation = {
			country = AUH
			relation = guarantee
			active = no
		}
		AUH = {
			diplomatic_relation = {
				country = ITA
				relation = guarantee
				active = no
			}
			add_ai_strategy = {
				type = alliance
				id = ITA
				value = -200
			}
			unlock_national_focus = AUH_deportation_of_italians
		}
		GER = {
			diplomatic_relation = {
				country = ITA
				relation = guarantee
				active = no
			}
			add_ai_strategy = {
				type = alliance
				id = ITA
				value = -200
			}
		}
		remove_ideas = idea_italy_triple_alliance
		ai_chance = {
			factor = 0
		}
	}
}

# DEAL WITH ITALY - NEWS
###############################
news_event = {
	id = ww1_austria.4
	title = ww1_austria.4.t
	desc = ww1_austria.4.d
	picture = EVENT_hoi4tgw_trialism
	is_triggered_only = yes
	major = yes
	option = {
		name = ww1_austria.4.a
		ai_chance = {
			factor = 100
		}
	}
}

# SERBIAN PROTECTORATE
#################
country_event = {
	id = ww1_austria.5
	title = ww1_austria.5.t
	desc = ww1_austria.5.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		name = ww1_austria.5.a
		set_country_flag = protectorate
		if = {
			limit = {
				OR = {
					has_dlc = "Together for Victory"
					has_dlc = "Waking the Tiger"
				}
			}
			AUH = {
				set_autonomy = {
					target = SER
					autonomous_state = autonomy_tgwr_informal_protectorate
					freedom_level = 0.8
				}
			}
			else = {
				AUH = {
					puppet = SER
					SER = { add_ideas = protectorate }
				}
			}
		}
		news_event = {
			id = ww1_austria.6
		}
		ai_chance = {
			factor = 2
		}
	}
	option = {
		name = ww1_austria.5.b
		AUH = {
			give_guarantee = SER
		}
		ai_chance = {
			factor = 1
		}
	}
}

# SERBIAN PROTECTORATE -  NEWS
#################
news_event = {
	id = ww1_austria.6
	title = ww1_austria.6.t
	desc = ww1_austria.6.d
	picture = EVENT_hoi4tgw_trialism
	is_triggered_only = yes
	major = yes
	option = {
		name = ww1_austria.6.a
		ai_chance = {
			factor = 100
		}
	}
}

# AUSTRIA CONTAIN RUSSIA
#################
country_event = {
	id = ww1_austria.7
	title = ww1_austria.7.t
	desc = ww1_austria.7.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		name = ww1_austria.7.a
		add_political_power = -100
		add_war_support = 0.05
		AUH = {
			country_event = {
				id = ww1_austria.8
				days = 2
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_austria.7.b
		#remove_ideas = { RUS_defender_of_balkans }
		ai_chance = {
			factor = 0
		}
	}
}

# AUSTRIA CONTAIN RUSSIA - ANSWER OF RUSSIA
#################
country_event = {
	id = ww1_austria.8
	title = ww1_austria.8.t
	desc = ww1_austria.8.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		name = ww1_austria.8.a
		ai_chance = {
			factor = 100
		}
	}
}

# ESTABLISHMENT OF UNITARY MONARCHY
#################
news_event = {
	id = ww1_austria.9
	title = ww1_austria.9.t
	desc = ww1_austria.9.d
	picture = EVENT_hoi4tgw_trialism
	is_triggered_only = yes
	major = yes
	option = {
		name = ww1_austria.9.a
		ai_chance = {
			factor = 100
		}
	}
}

# DEAL WITH ROMANIA
#################
country_event = {
	id = ww1_austria.10
	title = ww1_austria.10.t
	desc = ww1_austria.10.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		name = ww1_austria.10.a
		add_opinion_modifier = {
			target = AUH
			modifier = large_increase
		}
		AUH = {
			add_opinion_modifier = {
				target = ROM
				modifier = large_increase
			}
			country_event = {
				id = ww1_austria.11
				days = 2
			}
		}
		GER = {
			add_to_faction = ROM
		}
		ai_chance = {
			factor = 30
		}
	}
	option = {
		name = ww1_austria.10.b
		ai_chance = {
			factor = 10
		}
	}
}

# DEAL WITH ROMANIA - AUSTRIA GIVES SOUTH TRANSILVANIA
#################
country_event = {
	id = ww1_austria.11
	title = ww1_austria.11.t
	desc = ww1_austria.11.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		name = ww1_austria.11.a
		AUH = {
			every_owned_state = {
				limit = {
					OR = {
						state = 76
						state = 84
						state = 778
					}
				}
				AUH = { remove_state_core = PREV }
				ROM = { transfer_state = PREV }
			}
		}
		
		news_event = {
			id = ww1_austria.12
		}
		ai_chance = {
			factor = 100
		}
	}
}

# DEAL WITH ROMANIA - NEWS
#################
news_event = {
	id = ww1_austria.12
	title = ww1_austria.12.t
	desc = ww1_austria.12.d
	picture = EVENT_hoi4tgw_trialism
	is_triggered_only = yes
	major = yes
	option = {
		name = ww1_austria.12.a
		ai_chance = {
			factor = 100
		}
	}
}

# AUSTRIA LOST GREAT WAR - CROATIA LEAVES
#################
country_event = {
	id = ww1_austria.13
	title = ww1_austria.13.t
	desc = ww1_austria.13.d
	picture = GFX_report_event_ger_civil_war
	trigger = {
		original_tag = AUH
		has_country_flag = great_war_loser
		NOT = {
			has_global_flag = AUH_collapse
		}
		NOT = {
			has_global_flag = croatia_released
		}
		NOT = {
			has_completed_focus = AUH_unitary_monarchy
		}
		NOT = {
			has_completed_focus = AUH_reform_transleithania
		}
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 3
	}
	option = {
		name = ww1_austria.13.a
		set_global_flag = croatia_released
		every_state = {
			limit = {
				is_core_of = CRO
			}
			remove_core_of = AUH
		}
		CRO = {
			AUH = {
				end_puppet = CRO
			}
			drop_cosmetic_tag = yes
			every_state = {
				limit = {
					OR = {
						state = 109
						state = 103
						state = 104
						state = 102
						state = 208
						state = 575
					}
					OR = {
						is_owned_by = AUH
						is_owned_by = AUS
					}
				}
				CRO = {
					transfer_state = PREV
				}
			}
			if = {
				limit = {
					ITA = {
						has_country_flag = great_war_winner
					}
				}
				every_state = {
					limit = {
						OR = {
							is_owned_by = CRO
							is_owned_by = AUH
						}
						is_claimed_by = ITA
						OR = {
							state = 163
							state = 736
						}
					}
					ITA = { transfer_state = PREV }
				}
			}
			if = {
				limit = {
					ITA = {
						owns_state = 736
					}
					CRO = {
						owns_state = 513
					}
				}
				513 = {
					set_demilitarized_zone = yes
				}
			}
			every_state = {
				limit = {
					is_owned_by = CRO
				}
				add_core_of = CRO
			}
			hidden_effect = {
				load_oob = CRO_1918
				AUH = {
					transfer_navy = {
						target = CRO
					}
				}
			}
			set_cosmetic_tag = CRO_SSCS
			create_country_leader = {
				name = "Anton Korošec"
				picture = "gfx/leaders/SLV/SLV_Anton_Korosec.dds"
				expire = "1935.1.1"
				ideology = authoritarian_democracy
				traits = {
					trait_authoritarian_democracy
				}
			}
			create_country_leader = {
				name = "Anton Korošec"
				picture = "gfx/leaders/SLV/SLV_Anton_Korosec.dds"
				expire = "1935.1.1"
				ideology = conservatism
				traits = {
					trait_conservatism
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}
}

# AUSTRIA LOST GREAT WAR - CZECHOSLOVAKIA LEAVES
#################
country_event = {
	id = ww1_austria.14
	title = ww1_austria.14.t
	desc = ww1_austria.14.d
	picture = GFX_report_event_ger_civil_war
	trigger = {
		original_tag = AUH
		has_country_flag = great_war_loser
		NOT = {
			has_global_flag = AUH_collapse
			has_global_flag = czechoslovakia_released
			has_completed_focus = AUH_unitary_monarchy
			has_completed_focus = AUH_reform_transleithania
		}
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 2
	}
	option = {
		name = ww1_austria.14.a
		set_global_flag = czechoslovakia_released
		every_state = {
			limit = {
				is_owned_by = AUH
				OR = {
					state = 9
					state = 72
					state = 75
				}
			}
			remove_core_of = AUH
			CZE = {
				transfer_state = PREV
			}
		}
		AUH = {
			remove_state_core = 9
			remove_state_core = 75
			remove_state_core = 72
		}
		CZE = {
			if = {
				limit = {
					is_subject_of = AUH
				}
				AUH = {
					end_puppet = PREV
				}
			}
			drop_cosmetic_tag = yes
			clr_country_flag = CZE_ONLY
			hidden_effect = {
				load_oob = CZE_1918
				set_politics = {
					ruling_party = democratic
					last_election = "1910.1.1"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			every_state = {
				limit = {
					OR = {
						state = 70
						state = 71
						state = 72
						state = 73
						state = 664
					}
				}
				add_core_of = CZE
			}
			if = {
				limit = {
					AUH = {
						OR = {
							has_completed_focus = AUH_reform_transleithania
							has_completed_focus = AUH_unitary_monarchy
						}
					}
				}
				give_military_access = AUH
			}
		}
		ai_chance = {
			factor = 100
		}
	}
}

# AUSTRIA LOST GREAT WAR - POLAND LEAVES 
#################
country_event = {
	id = ww1_austria.15
	#title = ww1_austria.15.t
	#desc = ww1_austria.15.d
	#picture = GFX_report_event_ger_civil_war
	trigger = {
		original_tag = AUH
		has_country_flag = great_war_loser
		NOT = {
			has_global_flag = AUH_collapse
			has_global_flag = galicia_released
			has_completed_focus = AUH_unitary_monarchy
			has_completed_focus = AUH_reform_transleithania
		}
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 1
	}
	hidden = yes
	immediate = {
		set_global_flag = galicia_released
		every_state = {
			limit = {
				is_core_of = GAL
			}
			remove_core_of = AUH
		}
		if = {
			limit = {
				RUS = {
					has_country_flag = great_war_winner
					OR = {
						owns_state = 90
						owns_state = 92
						owns_state = 766
						owns_state = 93
					}
				}
				POL = {
					exists = no
				}
				91 = {
					is_claimed_by = RUS
				}
			}
			every_state = {
				limit = {
					is_core_of = GAL
					OR = {
						is_owned_by = AUH
						is_owned_by = AUS
					}
					NOT = {
						state = 72
					}
				}
				RUS = {
					transfer_state = PREV
				}
			}
		}
		else_if = {
			limit = {
				RUS = {
					has_country_flag = great_war_winner
					OR = {
						owns_state = 766
						owns_state = 93
					}
				}
				POL = {
					exists = yes
				}
				UKR = {
					exists = no
				}				#it means Russia must be coonected by the border
				91 = {
					is_claimed_by = RUS
				}
			}
			every_state = {
				limit = {
					OR = {
						is_owned_by = AUH
						is_owned_by = AUS
					}
					is_claimed_by = RUS
					is_core_of = UKR
				}
				RUS = {
					transfer_state = PREV
				}
			}
			every_state = {
				limit = {
					OR = {
						is_owned_by = AUH
						is_owned_by = AUS
					}
					is_core_of = POL
					NOT = {
						state = 72
					}
				}
				POL = {
					transfer_state = PREV
				}
			}
			else = {
				every_state = {
					limit = {
						OR = {
							is_owned_by = AUH
							is_owned_by = AUS
						}
						is_core_of = UKR
						NOT = {
							state = 73
							state = 237
						}
					}
					WUK = {
						transfer_state = PREV
						every_owned_state = {
							add_core_of = WUK
						}
					}
				}
				every_state = {
					limit = {
						OR = {
							is_owned_by = AUH
							is_owned_by = AUS
						}
						is_core_of = POL
						NOT = {
							state = 72
						}
					}
					POL = {
						transfer_state = PREV
					}
				}
			}
		}
		every_country = {
			limit = {
				owns_state = 79
			}
			transfer_state = 80
		}
	}
}

# AUSTRIA LOST GREAT WAR - HUNGARY LEAVES
#################
country_event = {
	id = ww1_austria.16
	title = ww1_austria.16.t
	desc = ww1_austria.16.d
	picture = GFX_report_event_ger_civil_war
	trigger = {
		original_tag = AUH
		has_country_flag = great_war_loser
		NOT = {
			has_global_flag = AUH_collapse
			has_global_flag = hungary_released
			has_completed_focus = AUH_unitary_monarchy
			has_completed_focus = AUH_reform_transleithania
		}
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 5
	}
	option = {
		name = ww1_austria.16.a
		set_global_flag = hungary_released
		set_cosmetic_tag = AUH_EMP
		HUN = {
			if = {
				limit = {
					is_subject_of = AUH
				}
				AUH = {
					end_puppet = PREV
				}
			}
			drop_cosmetic_tag = yes
		}
		every_state = {
			limit = {
				OR = {
					state = 43
					state = 147
					state = 154
					state = 155
					state = 664
					AND = {
						is_owned_by = AUH
						OR = {
							state = 45
							state = 70
							state = 71
							state = 73
							state = 76
							state = 80
							state = 82
							state = 83
							state = 84
							state = 513
							state = 764
							state = 778
						}
					}
				}
			}
			HUN = {
				transfer_state = PREV
			}
			remove_core_of = AUH
		}
		HUN = {
			hidden_effect = {
				load_oob = HUN_1918
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
				}
				set_popularities = {
					democratic = 40
					neutrality = 36
					fascism = 0
					communism = 24
				}
			}	
			set_country_flag = great_war_loser
		}
		ai_chance = {
			factor = 100
		}
	}
}

# AUSTRIA LOST GREAT WAR - DEATH OF EMPIRE
#################
country_event = {
	id = ww1_austria.17
	title = ww1_austria.17.t
	desc = ww1_austria.17.d
	picture = GFX_report_event_ger_civil_war
	trigger = {
		original_tag = AUH
		has_country_flag = great_war_loser
		has_global_flag = hungary_released
		has_global_flag = croatia_released
		has_global_flag = czechoslovakia_released
		has_global_flag = galicia_released
		NOT = {
			has_global_flag = AUH_collapse
			has_completed_focus = AUH_unitary_monarchy
			has_completed_focus = AUH_reform_transleithania
		}
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 1
	}
	option = {
		name = ww1_austria.17.a
		every_state = {
			limit = {
				is_core_of = AUH
			}
			remove_core_of = AUH
		}
		every_state = {
			limit = {
				is_owned_by = AUH
			}
			add_core_of = AUS
		}
		every_state = {
			limit = {
				is_claimed_by = AUH
			}
			remove_claim_by = AUH
		}
		AUS = {
			annex_country = {
				target = AUH
				transfer_troops = no
			}
			change_tag_from = AUH
			set_country_flag = great_war_loser
			add_ideas = idea_armistice
			country_lock_all_division_template = no
			add_ideas = idea_army_restrictions
			inherit_technology = AUH
			hidden_effect = {
				load_oob = AUS_1918
			}
			if = {
				limit = {
					ITA = {
						NOT = {
							has_country_flag = great_war_winner
							owns_state = 244
						}
					}
				}
				transfer_state = 244
			}
			# German-Austria
			set_cosmetic_tag = AUS_AUH
		}
		# Austria is not giving South Tyrol and Zara, so I added this.
		if = {
			limit = {
				ITA = {
					has_country_flag = great_war_winner
				}
			}
			every_state = {
				limit = {
					OR = {
						is_owned_by = AUH
						is_owned_by = AUS
						is_owned_by = HUN
					}
					OR = {
						state = 39
						state = 163
						state = 244
						state = 736
					}
				}
				ITA = {
					transfer_state = PREV
				}
			}
		}
		if = {
			limit = {
				HUN = {
					OR = {
						has_country_leader = {
							name = "I. Ferenc József"
							ruling_only = no
						}
						has_country_leader = {
							name = "I. Ferenc Ferdinánd"
							ruling_only = no
						}
						has_country_leader = {
							name = "IV. Károly"
							ruling_only = no
						}
					}
				}
			}
			HUN = {
				remove_ideas = AUH_ww1_House_Habsburg_Lorraine
				set_party_name = {
					ideology = neutrality
					long_name = HUN_neutrality_party
					name = HUN_neutrality_party
				}
				create_country_leader = {
					name = "Miklós Horthy"
					picture = "gfx/leaders/HUN/Portrait_Hungary_Miklos_Horthy.dds"
					expire = "1965.1.1"
					ideology = despotism
					traits = {
						anti_communist
						trait_despotism
					}
				}
			}
		}
		news_event = {
			id = ww1_austria.18
		}
		hidden_effect = {
			set_global_flag = AUH_collapse
		}
		ai_chance = {
			factor = 100
		}
	}
}

# DEATH OF AUSTRIA - NEWS
#################
news_event = {
	id = ww1_austria.18
	title = ww1_austria.18.t
	desc = ww1_austria.18.d
	picture = GFX_news_event_ger_civil_war
	is_triggered_only = yes
	major = yes
	option = {
		name = ww1_austria.18.a
		ai_chance = {
			factor = 100
		}
	}
}

# HUNGARIAN REVOLT
#################
country_event = {
	id = ww1_austria.19
	title = ww1_austria.19.t
	desc = ww1_austria.19.d
	picture = GFX_report_event_ger_civil_war
	trigger = {
		original_tag = AUH
		has_war_with = GER

		HUN = {
			exists = no
		}
		OR = {
			has_idea = AUH_hungarian_opposition
			has_stability < 0.5
		}
		NOT = {
			has_country_flag = great_war_loser
		}
		NOT = {
			has_global_flag = hungary_released
		}
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 15
	}
	option = {
		name = ww1_austria.19.a
		set_global_flag = hungary_released
		set_cosmetic_tag = AUH_EMP
		HUN = {
			every_state = {
				limit = {
					is_owned_by = AUH
					is_core_of = HUN
					NOT = {
						state = 778
					}
				}
				HUN = { transfer_state = PREV }
			}
			hidden_effect = {
				drop_cosmetic_tag = yes
				load_oob = HUN_1918
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
				}
				set_popularities = {
					democratic = 40
					neutrality = 36
					fascism = 0
					communism = 24
				}
			}
		}
		AUH = {
			declare_war_on = {
				target = HUN
				type = civil_war
			}
		}
		ai_chance = {
			factor = 100
		}
	}
}

# BROTHERS WAR - NEWS
#################
news_event = {
	id = ww1_austria.20
	title = ww1_austria.20.t
	desc = ww1_austria.20.d
	picture = GFX_news_event_ger_civil_war
	fire_only_once = yes
	trigger = {
		GER = {
			has_war_with = AUH
			is_subject = no
		}
		AUH = {
			is_subject = no 
		}
		has_global_flag = brothers_war
		NOT = { has_global_flag = brothers_war_ends }
	}
	major = yes
	option = {
		name = ww1_austria.20.a
	}
}
#Austrija odlučuje da li će da zahteva od Srbije da se povuče s obale
country_event = {
	id = ww1_austria.22
	title = ww1_austria.22.t
	desc = ww1_austria.22.d
	fire_only_once = yes
	trigger = {
		tag = AUH
		SER = {
			owns_state = 44
		}
		has_war = no
	}
	mean_time_to_happen = {
		days = 1
	}
	option = {
		name = ww1_austria.22.a
		AUH = {
			add_political_power = -75
		}
		SER = {
			country_event = ww1_serbia.24
		}
		RUS = {
			give_guarantee = SER
		}
		ai_chance = {
			factor = 60
		}
	}
	option = {
		name = ww1_austria.22.b
		SER = {
			set_country_flag = odbili_albaniju
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

#austrijska lutrija
country_event = {
	id = ww1_austria.23
	title = ww1_austria.23.t
	desc = ww1_austria.23.d
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		#e ako ovo izaberu, popušili smo kurac
		name = ww1_austria.23.a
		AUH = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = SER
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		name = ww1_austria.23.b
		SER = {
			country_event = ww1_serbia.25
		}
		ai_chance = {
			factor = 50
		}
	}
}

country_event = {
	id = ww1_austria.24
	title = ww1_austria.24.t
	desc = ww1_austria.24.d
	fire_only_once = yes
	mean_time_to_happen = {
		days = 14
	}
	trigger = {
		tag = AUH
		owns_state = 160
	}
	option = {
		name = ww1_austria.24.a
		ai_chance = {
			factor = 100
		}
		VNC = {
			add_state_core = 159
			add_state_core = 160
			transfer_state = 160
			set_cosmetic_tag = VNC_AUH
		}
		puppet = VNC
		if = {
			limit = {
				NOT = {
					has_country_flag = emperor_franz_dead
				}
			}
			VNC = {
				create_country_leader = {
					name = "Franz Joseph I"
					picture = "gfx/leaders/AUH/AUH_franz_joseph_i.dds"
					expire = "1935.1.1"
					ideology = autocracy
					traits = {
						trait_autocracy
					}
				}
			}
		}
		if = {
			limit = {
				has_country_flag = emperor_franz_dead
				NOT = {
					has_country_flag = franz_ferdinand_ruler
				}
			}
			VNC = {
				create_country_leader = {
					name = "Karl I"
					picture = "gfx/leaders/AUH/AUH_karl_i.dds"
					expire = "1935.1.1"
					ideology = autocracy
					traits = {
						trait_autocracy
					}
				}
			}
		}
		if = {
			limit = {
				has_country_flag = emperor_franz_dead
				has_country_flag = franz_ferdinand_ruler
			}
			VNC = {
				create_country_leader = {
					name = "Franz Ferdinand I"
					picture = "gfx/leaders/AUH/AUH_franz_ferdinand.dds"
					expire = "1935.1.1"
					ideology = autocracy
					traits = {
						trait_autocracy
					}
				}
			}
		}
		if = {
			limit = {
				owns_state = 159
			}
			VNC = {
				transfer_state = 159
			}
		}
	}
	option = {
		name = ww1_austria.24.b
		AUH = {
			add_stability = -0.07
		}
	}
}

country_event = {
	id = ww1_austria.25
	title = ww1_austria.25.t
	desc = ww1_austria.25.d
	fire_only_once = yes
	mean_time_to_happen = {
		days = 7
	}
	trigger = {
		has_global_flag = italian_civil_war
		tag = AUH
		160 = {
			OR = {
				is_owned_by = AUH
				is_owned_by = VNC
			}
		}
		any_country = {
			original_tag = ITA
			has_country_flag = ITA_socialist_italy_flag
			has_government = communism
			has_war_with = ITS
		}
	}
	option = {
		name = ww1_austria.25.a
		ai_chance = {
			factor = 100
		}
		if = {
			limit = {
				VNC = {
					is_subject_of = AUH
				}
			}
			VNC = {
				transfer_state = 159
			}
		}
		if = {
			limit = {
				VNC = {
					NOT = {
						is_subject_of = AUH
					}
				}
			}
			AUH = {
				transfer_state = 159
			}
		}
		AUH = {
			add_war_support = 0.02
			add_political_power = -150
			add_named_threat = {
				threat = 2
				name = ww1_austria.25.t
			}
		}
		ITA = {
			news_event = ww1_austria.26
		}
		SIC = {
			news_event = ww1_austria.26
		}
		SRD = {
			news_event = ww1_austria.26
		}
	}
	option = {
		name = ww1_austria.25.b
		AUH = {
			add_war_support = -0.02
		}
	}
}

news_event = {
	id = ww1_austria.26
	title = ww1_austria.26.t
	desc = ww1_austria.26.d
	picture = GFX_news_event_fascist_militia
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_austria.26.a
		ai_chance = {
			factor = 0
		}
	}
}

#Austria Hungary Collapse
country_event = {
	id = ww1_austria.27
	title = ww1_austria.27.t
	desc = ww1_austria.27.d
	fire_only_once = yes
	trigger = {
		tag = AUH
		has_global_flag = kis_war
		AND = {
			has_stability < 0.75
			casualties > 800000
		}
		NOT = {
			country_exists = CZE
		}
	}
	mean_time_to_happen = {
		days = 5
	}
	option = {
		name = ww1_austria.27.a
		AUH = {
			remove_state_core = 9
			remove_state_core = 75
			remove_state_core = 72
		}
		add_stability = -0.2
	}
}

# Italy offered the surrender terms in Bruderkrieg
#############################
country_event = {
	id = ww1_austria.28
	title = ww1_austria.28.t
	desc = ww1_austria.28.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_austria.28.a
		ITA = {
			leave_faction = yes
			white_peace = AUH
			if = {
				limit = {
					owns_state = 159
				}
				AUH = {
					transfer_state = 159
				}
			}
			if = {
				limit = {
					owns_state = 160
				}
				AUH = {
					transfer_state = 160
				}
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				OR = {
					has_war_support < 0.5
					surrender_progress > 0.3
				}
			}
		}
	}
	option = {
		name = ww1_austria.28.b
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				OR = {
					has_war_support < 0.5
					surrender_progress > 0.3
				}
			}
		}
	}
}

# Italy is fully defeated in Bruderkrieg
#############################
country_event = {
	id = ww1_austria.29
	title = ww1_austria.29.t
	desc = ww1_austria.29.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_austria.29.a
		ITA = {
			hidden_effect = {
				if = {
					limit = {
						owns_state = 159
					}
					AUH = {
						transfer_state = 159
					}
				}
				if = {
					limit = {
						owns_state = 160
					}
					AUH = {
						transfer_state = 160
					}
				}
				SIC = {
					add_state_core = 115
					add_state_core = 117
					add_state_core = 156
				}
				TUS = {
					add_state_core = 162
				}
				EMI = {
					add_state_core = 833
				}
				PAP = {
					add_state_core = 2
					add_state_core = 157
					add_state_core = 161
					add_state_core = 835
				}
				SRD = {
					add_state_core = 114
					add_state_core = 158
					add_state_claim = 735
					add_state_claim = 834
					set_cosmetic_tag = SRD_PIE
					set_capital = 158
				}
				every_state = {
					limit = {
						is_core_of = SRD
						is_owned_by = ITA
					}
					SRD = {
						transfer_state = PREV
					}
				}
				SRD = {
					change_tag_from = ITA
				}
				every_state = {
					limit = {
						is_core_of = SIC
						is_owned_by = ITA
					}
					SIC = {
						transfer_state = PREV
					}
				}
				transfer_units_fraction = {
					target = SRD
					size = 0.5
					stockpile_ratio = 0.5
					army_ratio = 0.5
					navy_ratio = 0.5
					air_ratio = 0.5
				}
				transfer_units_fraction = {
					target = SIC
					size = 1
					stockpile_ratio = 1
					army_ratio = 1
					navy_ratio = 1
					air_ratio = 1
				}
				every_state = {
					limit = {
						is_core_of = TUS
						is_owned_by = ITA
					}
					TUS = {
						transfer_state = PREV
					}
				}
				every_state = {
					limit = {
						is_core_of = EMI
						is_owned_by = ITA
					}
					EMI = {
						transfer_state = PREV
					}
				}
				every_state = {
					limit = {
						is_core_of = PAP
						is_owned_by = ITA
					}
					PAP = {
						transfer_state = PREV
					}
				}
				AUH = {
					if = {
						limit = {
							has_dlc = "Together for Victory"
						}
						set_autonomy = {
							target = SRD
							autonomous_state = autonomy_dominion
						}
					}
					else = {
						puppet = SRD
					}
					if = {
						limit = {
							has_dlc = "Together for Victory"
						}
						set_autonomy = {
							target = SIC
							autonomous_state = autonomy_dominion
						}
					}
					else = {
						puppet = SIC
					}
					if = {
						limit = {
							has_dlc = "Together for Victory"
						}
						set_autonomy = {
							target = PAP
							autonomous_state = autonomy_tgwr_protectorate
						}
					}
					else = {
						puppet = PAP
					}
					puppet = TUS
					puppet = EMI
					add_ai_strategy = {
						type = protect
						id = "SRD"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "SRD"
						value = 200
					}
					add_ai_strategy = {
						type = protect
						id = "TUS"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "TUS"
						value = 200
					}
					add_ai_strategy = {
						type = protect
						id = "VNC"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "VNC"
						value = 200
					}
					add_ai_strategy = {
						type = protect
						id = "EMI"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "EMI"
						value = 200
					}
					add_ai_strategy = {
						type = protect
						id = "SIC"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "SIC"
						value = 200
					}
					add_ai_strategy = {
						type = protect
						id = "PAP"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "PAP"
						value = 200
					}
				}
				every_state = {
					limit = {
						is_owned_by = ITA
						NOT = {
							is_core_of = ITA
						}
					}
					AUH = {
						transfer_state = PREV
					}
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}
}

# Engelbert Dollfuss's Federal State of Austria
##############################################
country_event = {
	id = ww1_austria.30
	title = ww1_austria.30.t
	desc = ww1_austria.30.d
	picture = GFX_report_event_ger_civil_war
	fire_only_once = yes
	trigger = {
		tag = AUS
		has_country_flag = great_war_loser
		OR = {
			fascism > 0.45
			date > 1934.5.1
		}
		has_country_leader = {
			name = "Engelbert Dollfuss"
			ruling_only = yes
		}
		NOT = {
			has_government = fascism
		}
	}
	option = {
		name = ww1_austria.30.a
		ai_chance = {
			factor = 100
		}
		remove_ideas = nationalism
		set_politics = {
			ruling_party = fascism
			elections_allowed = no
		}
		set_party_name = {
			ideology = fascism
			long_name = AUS_vaterland_party
			name = AUS_vaterland_party
		}
		create_country_leader = {
			name = "Engelbert Dollfuss"
			picture = "gfx/leaders/AUS/AUS_Engelbert_Dollfuss.dds"
			expire = "1935.1.1"
			ideology = fascism_ideology
			traits = {
				trait_fascism
			}
		}
		create_field_marshal = {
			name = "Engelbert Dollfuss"
			portrait_path = "gfx/leaders/AUS/AUS_Engelbert_Dollfuss_general.dds"
			traits = {
				media_personality
				politically_connected
				guerilla_fighter
				trait_mountaineer
			}
			skill = 2
			attack_skill = 2
			defense_skill = 1
			planning_skill = 2
			logistics_skill = 2
			id = 4725
		}
		hidden_effect = {
			set_cosmetic_tag = AUS_vaterland
		}	
	}
}

# Assassinate of Engelbert Dollfuss
##############################################
country_event = {
	id = ww1_austria.31
	title = ww1_austria.31.t
	desc = ww1_austria.31.d
	picture = GFX_report_event_ger_civil_war
	trigger = {
		tag = AUS
		has_country_leader = {
			name = "Engelbert Dollfuss"
			ruling_only = yes
		}
		has_government = fascism
		date > 1934.7.25
		GER = {
			has_country_leader = {
				name = "Adolf Hitler"
				ruling_only = yes
			}
			has_government = fascism
			is_subject = no
		}
		is_subject = no
	}
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			kill_ideology_leader = fascism
			every_unit_leader = {
				limit = {
					has_id = 4725
				}
				retire = yes
			}
			create_country_leader = {
				name = "Kurt Schuschnigg"
				picture = "Portrait_Austria_Kurt_Schuschnigg.dds"
				expire = "1945.1.1"
				ideology = fascism_ideology
				traits = {
					trait_fascism
				}
			}			
		}			
	}
	option = {
		name = ww1_austria.31.a
		effect_tooltip = {
			create_country_leader = {
				name = "Kurt Schuschnigg"
				picture = "Portrait_Austria_Kurt_Schuschnigg.dds"
				expire = "1945.1.1"
				ideology = fascism_ideology
				traits = {
					trait_fascism
				}
			}
		}
	}
}
