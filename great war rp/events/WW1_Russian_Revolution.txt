add_namespace = rusrevolt
# MINISTER KERENSKY
####################
country_event = {
	id = rusrevolt.1
	title = rusrevolt.1.t
	desc = rusrevolt.1.d
	picture = rusrevolt_1
	fire_only_once = yes
	trigger = {
		original_tag = RUS
		has_global_flag = russian_revolution
		has_country_leader = {
			name = "Georgiy Lvov"
			ruling_only = yes
		}
		RUS = {
			OR = {
				has_war_with = GER
				has_war_with = AUH
			}
			OR = {
				casualties > 1500000
				surrender_progress > 0.1
			}
		}
	}
	option = {
		name = rusrevolt.1.a
		retire_country_leader = yes
		create_country_leader = {
			name = "Alexander Kerensky"
			picture = "gfx/leaders/RUS/RUS_alexander_kerensky.dds"
			expire = "1935.1.1"
			ideology = socialism
			traits = {
				rus_knight_of_revolution
				trait_socialism
			}
		}
		add_stability = 0.05
		add_war_support = 0.05
		set_country_flag = alexander_kerensky
		clr_country_flag = georgy_lvov
		ai_chance = {
			factor = 100
		}
	}
}

# TSAR ABDICATED
###################
country_event = {
	id = rusrevolt.2
	title = rusrevolt.2.t
	desc = {
		text = rusrevolt.2.d_mikhail
		trigger = {
			has_global_flag = tsar_mikhail
		}
	}
	desc = {
		text = rusrevolt.2.d
		trigger = {
			NOT = {
				has_global_flag = tsar_mikhail
			}
		}
	}
	picture = rusrevolt_2
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = rusrevolt.2.a
		if = {
			limit = {
				has_global_flag = tsar_mikhail
			}			
			retire_ideology_leader = neutrality
			create_country_leader = {
				name = "Mikhail II"
				picture = "gfx/leaders/RUS/RUS_mikhail_romanov.dds"
				expire = "1935.1.1"
				ideology = autocracy
				traits = { trait_autocracy }
			}
		}
		if = {
			limit = {
				NOT = {
					has_global_flag = tsar_mikhail
				}
			}
			retire_ideology_leader = neutrality
			set_global_flag = nicholas_ii_abdication
			set_global_flag = russian_revolution
			set_country_flag = dual_power
			add_ideas = RUS_idea_dual_power
			set_politics = {
				ruling_party = democratic
				last_election = "1912.9.1"
				election_frequency = 60
				elections_allowed = no
			}
			set_cosmetic_tag = RUS_republic
			hidden_effect = {
				set_popularities = {
					democratic = 52
					neutrality = 0
					fascism = 10
					communism = 38
				}
				create_country_leader = {
					name = "Mikhail Rodzyanko"
					picture = "gfx/leaders/RUS/RUS_mikhail_rodzyanko.dds"
					expire = "1935.1.1"
					ideology = authoritarian_democracy
					traits = { trait_authoritarian_democracy }
				}
				set_party_name = {
					ideology = neutrality
					long_name = RUS_democratic_party_long
					name = RUS_democratic_party
				}
			}
			remove_unit_leader = 76267
			remove_unit_leader = 92219
			remove_unit_leader = 92217
			create_corps_commander = {
				name = "Pyotr Wrangel"
				picture = "RUS_pyotr_wrangel.dds"
				traits = { trickster harsh_leader hidden_sympathies } 
				skill = 2
				attack_skill = 2
				defense_skill = 1
				planning_skill = 2
				logistics_skill = 2
			}
			create_corps_commander = {
				name = "Alexander Dutov"
				picture = "RUS_alexander_dutov.dds"
				traits = { trickster cavalry_officer inflexible_strategist media_personality } 
				skill = 3
				attack_skill = 2
				defense_skill = 3
				planning_skill = 3
				logistics_skill = 2
			}
			if = {
				limit = {
					NOT = {
						has_country_leader = {
							name = "Alexander Kerensky"
							ruling_only = yes
						}
					}
				}
				create_country_leader = {
					name = "The Provisional Government"
					picture = "gfx/leaders/RUS/RUS_provisional_government.dds"
					expire = "1935.1.1"
					ideology = social_liberalism
					traits = { trait_social_liberalism }
				}
			}
			set_party_name = {
				ideology = democratic
				long_name = RUS_democratic_party_provisional_government_long
				name = RUS_democratic_party_provisional_government
			}
			if = {
				limit = {
					has_idea = RUS_threat_of_revolution2
				}
				swap_ideas = {
					remove_idea = RUS_threat_of_revolution2
					add_idea = RUS_threat_of_revolution3
				}
			}
			news_event = {
				hours = 6
				id = rusrevolt.5
			}
		}
		ai_chance = {
			factor = 100
		}
	}
}

# MINISTER LVOV
##################
country_event = {
	id = rusrevolt.3
	title = rusrevolt.3.t
	desc = rusrevolt.3.d_lvov
	picture = rusrevolt_3
	fire_only_once = yes
	trigger = {
		tag = RUS
		has_global_flag = russian_revolution
		has_country_leader = {
			name = "The Provisional Government"
			ruling_only = yes
		}
	}
	mean_time_to_happen = {
		days = 10
	}
	option = {
		name = rusrevolt.3.a
		retire_country_leader = yes
		create_country_leader = {
			name = "Georgiy Lvov"
			picture = "gfx/leaders/RUS/RUS_georgy_lvov.dds"
			expire = "1935.1.1"
			ideology = social_liberalism
			traits = {
				trait_social_liberalism
			}
		}
		set_country_flag = georgy_lvov
		ai_chance = {
			factor = 100
		}
	}
}

# LENIN DEMONSTRATION
##########################
country_event = {
	id = rusrevolt.4
	title = rusrevolt.4.t
	desc = rusrevolt.4.d
	picture = rusrevolt_4
	fire_only_once = yes
	trigger = {
		original_tag = RUS
		SOV = {
			exists = no
		}
		NOT = {
			has_global_flag = october_revolution
		}
		has_global_flag = russian_revolution
		OR = {
			has_country_leader = {
				name = "Alexander Kerensky"
				ruling_only = yes
			}
			has_country_leader = {
				name = "Pyotr Stolypin"
				ruling_only = yes
			}
		}
		has_government = democratic
		RUS = {
			OR = {
				has_war_with = GER
				has_war_with = AUH
			}
			OR = {
				surrender_progress > 0.1
				casualties > 1500000
			}
		}
	}
	mean_time_to_happen = {
		days = 7
	}
	# REVOLUTION WILL BE SOON
	option = {
		name = rusrevolt.4.a
		activate_mission = RUS_threat_of_bolshevik_revolution
		add_popularity = {
			ideology = communism
			popularity = 0.09
		}
		add_popularity = {
			ideology = democratic
			popularity = 0.01
		}
		custom_effect_tooltip = rusrevolt.4_tt
		set_country_flag = RUS_bolshevik_threat
		ai_chance = {
			factor = 80
		}
	}
	# KORNILOV DICTATORSHIP
	option = {
		name = rusrevolt.4.b
		news_event = {
			hours = 6
			id = rusrevolt.8
		}
		create_country_leader = {
			name = "Lavr Kornilov"
			picture = "gfx/leaders/RUS/RUS_lavr_kornilov.dds"
			expire = "1935.1.1"
			ideology = stratocracy
			traits = { trait_stratocracy }
		}
		set_politics = {
			ruling_party = fascism
			elections_allowed = no
		}
		add_popularity = {
			ideology = fascism
			popularity = 0.3
		}
		add_popularity = {
			ideology = communism
			popularity = -0.1
		}
		remove_ideas = RUS_idea_dual_power
		clr_country_flag = dual_power
		add_stability = -0.25
		add_political_power = -150
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				OR = {
					AND = {
						is_historical_focus_on = yes
						has_game_rule = {
							rule = RUS_ai_behavior 
							option = DEFAULT
						}
					}
					has_country_flag = RUS_AI_RANDOM_HISTORICAL
					has_game_rule = {
						rule = RUS_ai_behavior 
						option = HISTORICAL
					}
				}
			}
			modifier = {
				factor = 0
				GER = {
					is_ai = no
					has_war_with = RUS
				}	
			}
		}
	}
	# KERENSKY DICTATORSHIP
	option = {
		name = rusrevolt.4.c
		#news_event = {
		#	hours = 6
		#	id = rusrevolt.8
		#}
		trigger = {
			has_country_leader = {
				name = "Alexander Kerensky"
				ruling_only = yes
			}
		}
		create_country_leader = {
			name = "Alexander Kerensky"
			picture = "gfx/leaders/RUS/RUS_alexander_kerensky_dictator.dds"
			expire = "1935.1.1"
			ideology = authoritarian_democracy
			traits = {
				rus_knight_of_revolution
				trait_authoritarian_democracy
			}
		}
		set_party_name = {
			ideology = democratic
			long_name = RUS_democratic_party_SR_long
			name = RUS_democratic_party_SR
		}
		set_party_name = {
			ideology = neutrality
			long_name = RUS_democratic_party_provisional_government_long
			name = RUS_democratic_party_provisional_government
		}
		hidden_effect = {
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.3
			}
		}
		remove_ideas = RUS_idea_dual_power
		clr_country_flag = dual_power
		add_stability = -0.05
		add_political_power = -200
		ai_chance = {
			base = 30
			modifier = {
				factor = 0
				OR = {
					AND = {
						is_historical_focus_on = yes
						has_game_rule = {
							rule = RUS_ai_behavior 
							option = DEFAULT
						}
					}
					has_country_flag = RUS_AI_RANDOM_HISTORICAL
					has_game_rule = {
						rule = RUS_ai_behavior 
						option = HISTORICAL
					}
				}
			}
			modifier = {
				factor = 0
				GER = {
					is_ai = no
					has_war_with = RUS
				}	
			}
		}
	}
}

# TSAR ABDICATED. RUSSIAN REVOLUTION - NEWS
############################################
news_event = {
	id = rusrevolt.5
	title = rusrevolt.5.t
	desc = rusrevolt.5.d
	picture = rusrevolt_5
	is_triggered_only = yes
	major = yes
	option = {
		name = rusrevolt.5.a
		if = {
			limit = {
				has_game_rule = {
					rule = rule_superevent
					option = DEFAULT
				}
				is_ai = no
			}
			hidden_effect = {
				set_country_flag = SE_rus_february_revolution
				play_song = "SE_rus_february_revolution"
			}
		}
		ai_chance = {
			factor = 100
		}
	}
}

# BOLSHEVIKS REVOLUTION
##########################
country_event = {
	id = rusrevolt.6
	title = rusrevolt.6.t
	desc = rusrevolt.6.d
	picture = rusrevolt_6
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_global_flag = october_revolution
			set_global_flag = russian_civil_war
			if = {
				limit = {
					FRA = {
						is_faction_leader = yes
					}
					RUS = {
						is_in_faction_with = FRA
					}
				}
				FRA = {
					remove_from_faction = RUS
				}
			}
			SOV = {
				add_named_threat = {
					threat = 10
					name = rusrevolt.6.t
				}
				create_faction = "red_movement"
				set_political_power = 0
				set_stability = 0.65
				transfer_state = 195
				transfer_state = 264
				transfer_state = 263
				transfer_state = 209
				transfer_state = 210
				transfer_state = 246
				transfer_state = 247
				transfer_state = 219
				transfer_state = 242
				transfer_state = 205
				declare_war_on = {
					target = RUS
					type = civil_war
				}
				every_state = {
					limit = {
						is_core_of = RUS
					}
					add_core_of = SOV
				}
				add_timed_idea = {
					idea = SOV_idea_red_guard
					days = 270
				}
				remove_ideas = neutrality_idea
				remove_ideas = internationalism
				country_event = {
					days = 10
					id = rusrevolt.9
				}
				load_oob = "SOV_1917"
				if = {
					limit = {
						GER = {
							has_completed_focus = GER_strike_from_the_shadows
						}
						has_global_flag = strike_from_the_shadows
					}
					SOV = {
						add_timed_idea = {
							idea = GER_idea_abwehr_support
							days = 365
						}
						add_country_leader_trait = german_agent
						set_global_flag = lenin_german_agent
					}
					GER = {
						add_timed_idea = {
							idea = GER_idea_abwehr_supports_revolution
							days = 365
						}
					}
				}
			}
			RUS = {
				if = {
					limit = {
						UZB = {
							is_subject_of = RUS
						}
					}
					set_autonomy = {
						target = UZB
						autonomy_state = autonomy_free
					}
					UZB = {
						leave_faction = yes
						clr_country_flag = protectorate
					}
				}
				if = {
					limit = {
						TAJ = {
							is_subject_of = RUS
						}
					}
					set_autonomy = {
						target = TAJ
						autonomy_state = autonomy_free
					}
					TAJ = {
						leave_faction = yes
						clr_country_flag = protectorate
					}
				}
				every_unit_leader = {
					limit = {
						OR = {
							has_id = 76187
							has_id = 76236
						}
					}
					remove_unit_leader_trait = hidden_sympathies
				}
				create_faction = "white_movement"
				transfer_units_fraction = {
					target = SOV
					#size = 0.25
					stockpile_ratio = 0.45
					army_ratio = 0.45
					navy_ratio = 0.95
					air_ratio = 0.3
					keep_unit_leaders_trigger = {
						NOT = {
							has_id = 76187
							has_id = 76236
							has_id = 76242
						}
					}
					#Brusilov, Bonch-Bruevich, Radkevich
				}
				delete_unit = {
					disband = yes
				}
				load_oob = "RUS_civil_war"
				random_owned_state = {
					limit = {
						is_controlled_by = RUS
						NOT = {
							has_state_flag = white_guard_state
						}
					}
					create_unit = {
						division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
						owner = RUS
						allow_spawning_on_enemy_provs = no
						count = 6
						country_score = {
							base = 100
						}
					}
					set_state_flag = white_guard_state
				}
				random_owned_state = {
					limit = {
						is_controlled_by = RUS
						NOT = {
							has_state_flag = white_guard_state
						}
					}
					set_state_flag = white_guard_state
					create_unit = {
						division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
						owner = RUS
						allow_spawning_on_enemy_provs = no
						count = 6
						country_score = {
							base = 100
						}
					}
				}
				random_owned_state = {
					limit = {
						is_controlled_by = RUS
						NOT = {
							has_state_flag = white_guard_state
						}
					}
					set_state_flag = white_guard_state
					create_unit = {
						division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
						owner = RUS
						allow_spawning_on_enemy_provs = no
						count = 6
						country_score = {
							base = 100
						}
					}
				}
				random_owned_state = {
					limit = {
						is_controlled_by = RUS
						NOT = {
							has_state_flag = white_guard_state
						}
					}
					set_state_flag = white_guard_state
					create_unit = {
						division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
						owner = RUS
						allow_spawning_on_enemy_provs = no
						count = 6
						country_score = {
							base = 100
						}
					}
				}
				random_owned_state = {
					limit = {
						is_controlled_by = RUS
						NOT = {
							has_state_flag = white_guard_state
						}
					}
					set_state_flag = white_guard_state
					create_unit = {
						division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
						owner = RUS
						allow_spawning_on_enemy_provs = no
						count = 6
						country_score = {
							base = 100
						}
					}
				}
				random_owned_state = {
					limit = {
						is_controlled_by = RUS
						NOT = {
							has_state_flag = white_guard_state
						}
					}
					set_state_flag = white_guard_state
					create_unit = {
						division = "division_template = \"White Guard Corps\"	start_experience_factor = 0.4	start_equipment_factor = 1"
						owner = RUS
						allow_spawning_on_enemy_provs = no
						count = 6
						country_score = {
							base = 100
						}
					}
				}
				remove_ideas = RUS_threat_of_revolution3
				remove_ideas = RUS_idea_dual_power
				set_country_flag = petrograd_uprising
				add_stability = -0.1
				if = {
					limit = {
						has_government = democratic
					}
					add_popularity = {
						ideology = democratic
						popularity = 0.65
					}
					add_popularity = {
						ideology = fascism
						popularity = 0.25
					}
				}
				if = {
					limit = {
						has_government = neutrality
					}
					add_popularity = {
						ideology = neutrality
						popularity = 0.65
					}
					add_popularity = {
						ideology = fascism
						popularity = 0.25
					}
					add_popularity = {
						ideology = democratic
						popularity = 0.1
					}
				}
				remove_unit_leader = 762566
				remove_unit_leader = 762543
				remove_unit_leader = 762544
				remove_unit_leader = 12032
				remove_unit_leader = 92221
				remove_unit_leader = 92222
				remove_unit_leader = 92223
				remove_unit_leader = 76238
				remove_unit_leader = 76243
				create_corps_commander = {
					name = "Mikhail Drozdovsky"
					picture = "RUS_mikhail_drozdovskiy.dds"
					traits = { cavalry_officer trait_reckless trickster }
					skill = 2
					attack_skill = 2
					defense_skill = 2
					planning_skill = 1
					logistics_skill = 2
				}
				create_corps_commander = {
					name = "Vladimir Kappel"
					picture = "RUS_vladimir_kappel.dds"
					traits = { trait_reckless war_hero brilliant_strategist } 
					skill = 3
					attack_skill = 3
					defense_skill = 2
					planning_skill = 3
					logistics_skill = 2
				}
				create_corps_commander = {
					name = "Grigory Semyonov"
					picture = "RUS_grigory_semenov.dds"
					traits = { cavalry_officer organizer media_personality career_officer } 
					skill = 2
					attack_skill = 3
					defense_skill = 1
					planning_skill = 2
					logistics_skill = 2
				}
				create_corps_commander = {
					name = "Alexander Kutepov"
					picture = "RUS_alexander_kutepov.dds"
					traits = { }
					skill = 2
					attack_skill = 2
					defense_skill = 2
					planning_skill = 1
					logistics_skill = 1
				}
				create_corps_commander = {
					name = "Pavel Shatilov"
					picture = "RUS_pavel_shatilov.dds"
					traits = { cavalry_officer }
					skill = 1
					attack_skill = 1
					defense_skill = 1
					planning_skill = 1
					logistics_skill = 1
				}
				#Transcaucasian Commissariat
				country_event = {
					id  = ww1_russia.32
					days = 4
				}
				#Ukrainian People's Republic
				country_event = {
					id  = ww1_russia.34
					days = 13
				}
				#Turkestan Autonomy
				country_event = {
					id = ww1_russia.36
					days = 20
				}
				#Finland
				country_event = {
					id = ww1_russia.37
					days = 30
				}
				#Crimea
				country_event = {
					id = rusrevolt.13
					days = 36
				}
				#Moldavian Democratic Republic
				country_event = {
					id = ww1_russia.93
					days = 38
				}
				#Alash Autonomy
				country_event = {
					id = ww1_russia.35
					days = 49
				}
				#Kuban
				country_event = {
					id = ww1_russia.94
					days = 82 
				}	
				#Don
				country_event = {
					id = ww1_russia.95
					days = 192 
				}				
			}
		}
	}
	option = {
		name = rusrevolt.6.a
		news_event = {
			hours = 6
			id = rusrevolt.7
		}
		trigger = {
			tag = RUS
			NOT = {
				tag = SOV
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = rusrevolt.6.b
		SOV = {
			change_tag_from = RUS
		}
		news_event = {
			hours = 6
			id = rusrevolt.7
		}
		trigger = {
			tag = RUS
			NOT = {
				tag = SOV
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

# BOLSHEVIKS REVOLUTION - NEWS
###############################
news_event = {
	id = rusrevolt.7
	title = rusrevolt.7.t
	desc = rusrevolt.7.d
	picture = rusrevolt_7
	is_triggered_only = yes
	major = yes
	option = {
		name = rusrevolt.7.a
		trigger = {
			NOT = {
				TAG = SOV
			}
		}
		if = {
			limit = {
				has_game_rule = {
					rule = rule_superevent
					option = DEFAULT
				}
				is_ai = no
			}
			hidden_effect = {
				set_country_flag = SE_rus_october_revolution
				play_song = "SE_rus_october_revolution"
			}
		}
	}
	option = {
		name = rusrevolt.7.b
		trigger = {
			TAG = SOV
		}
		if = {
			limit = {
				has_game_rule = {
					rule = rule_superevent
					option = DEFAULT
				}
				is_ai = no
			}
			hidden_effect = {
				set_country_flag = SE_rus_october_revolution
				play_song = "SE_rus_october_revolution"
			}
		}
	}
}

# KORNILOV IS DICTATOR - NEWS
#############################
news_event = {
	id = rusrevolt.8
	title = rusrevolt.8.t
	desc = rusrevolt.8.d
	picture = rusrevolt_8
	is_triggered_only = yes
	major = yes
	option = {
		name = rusrevolt.8.a
	}
}

# OCTOBER REVOLUTION - UPRISING
################################
country_event = {
	id = rusrevolt.9
	hidden = yes
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		SOV = {
			transfer_state = 206			#Minsk
			transfer_state = 207
			transfer_state = 204
			transfer_state = 194
			transfer_state = 224			#Brynsk
			transfer_state = 223
			transfer_state = 254
			transfer_state = 253			#Yaroslavl
			transfer_state = 248
			transfer_state = 252
			transfer_state = 255
			transfer_state = 257
			transfer_state = 258
			transfer_state = 351
			transfer_state = 216
			transfer_state = 214			#Arhangelsk
			transfer_state = 215
			transfer_state = 213
			transfer_state = 243
			transfer_state = 241
			transfer_state = 722
		}
	}
}

# OCTOBER REVOLUTION - UPRISING 2
#################################
country_event = {
	id = rusrevolt.10
	hidden = yes
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		SOV = {
			transfer_state = 256
			transfer_state = 250
			transfer_state = 249
			transfer_state = 251
			transfer_state = 239
			transfer_state = 401
			transfer_state = 260
			transfer_state = 240
			transfer_state = 220
		}
	}
}

# FINNISH CIVIL WAR
#####################
country_event = {
	id = rusrevolt.11
	title = rusrevolt.11.t
	desc = rusrevolt.11.d
	picture = GFX_report_event_generic_military_parade
	fire_only_once = yes
	trigger = {
		tag = FIN
		NOT = {
			has_government = communism
		}
		has_global_flag = russian_civil_war
		RUS = {
			has_war_with = SOV
		}
	}
	mean_time_to_happen = {
		days = 67
	}
	option = {
		name  = rusrevolt.11.a
		set_global_flag = finnish_civil_war
		set_capital = 149
		start_civil_war = {
			keep_unit_leaders_trigger = {
				always = yes
			}
			ideology = communism
			size = 0.25
			states = {
				111
			}
			hidden_effect = {
				set_cosmetic_tag = FIN_red
			}
		}
	}
	option = {
		name  = rusrevolt.11.b
		set_global_flag = finnish_civil_war
		set_capital = 149
			start_civil_war = {
			keep_unit_leaders_trigger = {
				always = yes
			}
			ideology = communism
			size = 0.3
			states = {
				111
			}
			hidden_effect = {
				set_cosmetic_tag = FIN_red
			}
		}
		every_other_country = {
			limit = {
				original_tag = FIN
				has_government = communism
			}
			change_tag_from = FIN	
		}
		trigger = {
			is_ai = no
		}
	}
}
# UKRAINIAN CIVIL WAR
#####################
country_event = {
	id = rusrevolt.12
	title = rusrevolt.12.t
	desc = rusrevolt.12.d
	picture = GFX_report_event_generic_military_parade
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		set_global_flag = ukrainian_civil_war
	}
	option = {
		UKR = {
			start_civil_war = {
				ideology = SOV
				size = 0.7
				states = {
					196
					226
					227
					228
					221
				}
			}
		}
		hidden_effect = {
			random_other_country = {
				limit = {
					original_tag = UKR
					has_government = SOV
				}
				SOV = {
					puppet = PREV
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}
}

# UPRISING OF CRIMEA
####################
country_event = {
	id = rusrevolt.13
	title = rusrevolt.13.t
	desc = rusrevolt.13.d
	picture = GFX_report_event_generic_military_parade
	is_triggered_only = yes
	trigger = {
		CRI = {
			exists = no
		}
		has_war_with = SOV
		owns_state = 137
	}
	immediate = {
		hidden_effect = {
			CRI = {
				transfer_state = 137
				load_oob = "CRI_1918"
				set_popularities = {
					democratic = 29
					fascism = 0
					communism = 71
				}
				set_politics = {
					ruling_party = democratic
				}
				inherit_technology = RUS
			}
		}
	}
	option = {
		name = rusrevolt.13.a
		effect_tooltip = {
			release = CRI
		}
	}
	option = {
		name = rusrevolt.13.b
		CRI = {
			change_tag_from = ROOT
		}
		trigger = {
			is_ai = no
		}
	}
}

# SOVIET CRIMEA
################
country_event = {
	id = rusrevolt.14
	title = rusrevolt.14.t
	desc = rusrevolt.14.d
	picture = GFX_report_event_generic_military_parade
	fire_only_once = yes
	trigger = {
		tag = SOV
		CRI = {
			has_government = communism
			is_subject = no
		}
		has_war_with = RUS
	}
	mean_time_to_happen = {
		days = 5
	}
	option = {
		name = rusrevolt.14.a
		SOV = {
			puppet = CRI
		}
	}
}

# HERE IS NESTOR MAKHNO
####################
country_event = {
	id = rusrevolt.15
	hidden = yes
	fire_only_once = yes
	trigger = {
		tag = UKR
		has_civil_war = yes
		any_country = {
			original_tag = UKR
			owns_state = 226		
		}	
	}
	mean_time_to_happen = {
		days = 20
	}
	immediate = {
		VLN = {
			transfer_state = 226
			add_state_core = 226
			declare_war_on = {
				target = UKR
				type = annex_everything
			}
			load_oob = "VLN_1918"
		}
	}
}
# END OF RUSSIAN CIVIL WAR
##########################
news_event = {
	id = rusrevolt.19
	title = rusrevolt.19.t
	desc = {
		text = rusrevolt.19.d_soviet
		trigger = {
			SOV = {
				has_country_flag = russian_civil_war_winner
			}
		}
	}
	desc = {
		text = rusrevolt.19.d_russia
		trigger = {
			RUS = {
				has_country_flag = russian_civil_war_winner
			}
		}
	}
	picture = rusrevolt_19
	major = yes
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					RUS = {
						has_country_flag = russian_civil_war_winner
					}
				}
				every_state = {
					limit = {
						OR = {
							is_core_of = SOV
							is_claimed_by = SOV
						}						
					}
					SOV = {
						remove_state_claim = PREV
						remove_state_core = PREV
					}				
				}
				RUS = {
					annex_country = {
						target = SOV
					}
				}
			}
			if = {
				limit = {
					SOV = {
						has_country_flag = russian_civil_war_winner
					}
				}
				every_state = {
					limit = {
						OR = {
							is_core_of = RUS
							is_claimed_by = RUS
						}						
					}
					RUS = {
						remove_state_claim = PREV
						remove_state_core = PREV
					}				
				}
				SOV = {
					annex_country = {
						target = RUS
					}
				}
			}
		}
	}
	option = {
		name = news.64.a
		trigger = {
			NOT = {
				tag = SOV
				tag = RUS
			}
		}
		if = {
			limit = {
				has_game_rule = {
					rule = rule_superevent
					option = DEFAULT
				}
				is_ai = no
				SOV = {
					has_country_flag = russian_civil_war_winner
					has_government = communism
				}
			}
			hidden_effect = {
				play_song = "SE_rus_civil_war_winner_red"
				set_country_flag = SE_rus_civil_war_winner_red
			}
		}
		if = {
			limit = {
				has_game_rule = {
					rule = rule_superevent
					option = DEFAULT
				}
				is_ai = no
				RUS = {
					has_country_flag = russian_civil_war_winner
				}
			}
			hidden_effect = {
				play_song = "SE_rus_civil_war_winner_white"
				set_country_flag = SE_rus_civil_war_winner_white
			}
		}
	}
	option = {
		name = rusrevolt.19.b
		trigger = {
			original_tag = SOV
		}
		delete_unit_template_and_units = {
			division_template = "Brigada Opolcheniya"
		}
		if = {
			limit = {
				has_game_rule = {
					rule = rule_superevent
					option = DEFAULT
				}
				is_ai = no
				SOV = {
					has_country_flag = russian_civil_war_winner
					has_government = communism
				}
			}
			hidden_effect = {
				play_song = "SE_rus_civil_war_winner_red"
				set_country_flag = SE_rus_civil_war_winner_red
			}
		}
	}
	option = {
		name = rusrevolt.19.c
		trigger = {
			original_tag = RUS
		}
		if = {
			limit = {
				has_game_rule = {
					rule = rule_superevent
					option = DEFAULT
				}
				is_ai = no
				RUS = {
					has_country_flag = russian_civil_war_winner
				}
			}
			hidden_effect = {
				play_song = "SE_rus_civil_war_winner_white"
				set_country_flag = SE_rus_civil_war_winner_white
			}
		}
	}
}
